<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
    integrity="undefined" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Movies Challenge</title>
</head>

<header>
  <div>
    <h1 class="título">  LISTADO DE PELICULAS</h1>
  </div>
     
  <div>
      <ul class="navegacion">
        <% if(usuario == undefined ){ %>
        <li class="navegacion-menu">
          <a class="botonLogin" role="button" aria-pressed="true" href="/login">Loguearse</a>
        </li>
        <li class="navegacion-menu">
          <a class="botonRegistrar" role="button" aria-pressed="true" href="/registrar">Registrarse</a>
        </li>
        <% } %>
        <% if(usuario != undefined ){ %> 
          <li class="navegacion-menu">
              <h2 class="bienvenido"><p>Bienvenido</p><%= usuario %> </h2>
          </li>
          <% } %> 
        <% if(usuario != undefined ){ %> 
        <li class="navegacion-menu">
          <a class="botonSalir" role="button" onclick="alerta()" aria-pressed="true">Salir</a>
        </li>
        <% } %>
        <% if(usuario != undefined ){ %> 
          <li class="navegacion-menu">
            <a class="botonAgregar" role="button" aria-pressed="true" href="/crear">Agregar</a>
          </li>
          <% } %>
      </ul>
    </div>
</header>
<body>
  <main>

    <section>
    <div class="listado">
      <% for(let i=0; i< peliculas.length; i++) { %>
  
        <a href="/detalle/<%= peliculas[i].id %> " class="list-group-item list-group-item-action">
          <%= peliculas[i].title %>
        </a>
        <% } %>
  
      </section>
  </main>
</body>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="undefined"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="undefined"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.esm.min.js" integrity="undefined"
    crossorigin="anonymous"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    function alerta() {
      Swal.fire({
        title: 'Logout',
        text: "Seguro que vas a desconectarte? ",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#26CB49',
        cancelButtonColor: '#d33',
        cancelButtonText:'Cancelar',
        confirmButtonText: 'Si'
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire({
            title: 'Te desconectaste',
            text: 'Desconectándote',
            icon: 'success',
            timer: 1800,
            showConfirmButton: false
          }
          ).then(function () {
            window.location = "/logout";
          })
        }
      })
    }
  </script>
</body>
<footer>
	<p>Copyright 2022 - All rights reserved</p>
</footer>
</html>